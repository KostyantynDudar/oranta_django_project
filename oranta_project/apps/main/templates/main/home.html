{% extends 'base.html' %}
{% load static %}

{% block title %}Головна{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Оформити заявку на страхування</h1>
    
    <form method="post" action="{% url 'submit_insurance_form' %}" enctype="multipart/form-data">
        {% csrf_token %}
        
	<div class="mb-3">
		<label for="phone_number" class="form-label">Телефон:</label>
		<input 
			type="tel" 
			class="form-control {% if form.phone_number.errors %}is-invalid{% endif %}" 
			id="phone_number" 
			name="phone_number" 
			pattern="\+380\d{9}" 
			placeholder="+380XXXXXXXXX" 
			required
		>
		<div class="form-text">Введите номер в формате <b>+380XXXXXXXXX</b>.</div>
		{% if form.phone_number.errors %}
		<div class="invalid-feedback">
			{{ form.phone_number.errors|striptags }}
		</div>
		{% endif %}
	</div>


		<div class="mb-3">
			<label for="tax_code" class="form-label">Реєстраційний номер облікової картки платника податків:</label>
			<input 
				type="text" 
				class="form-control {% if form.tax_code.errors %}is-invalid{% endif %}" 
				id="tax_code" 
				name="tax_code" 
				pattern="\d{10}" 
				placeholder="XXXXXXXXXX" 
				required
			>
			<div class="form-text">Введіть ідентифікаційний номер (10 цифр).</div>
			{% if form.tax_code.errors %}
			<div class="invalid-feedback">
				{{ form.tax_code.errors|striptags }}
			</div>
			{% endif %}
		</div>


        <div class="mb-3">
            <label for="tech_passports" class="form-label">Техпаспорта (завантажте файли):</label>
            <input type="file" class="form-control" id="tech_passports" name="tech_passports" multiple>
        </div>

        <div class="mb-3">
            <label for="personal_docs" class="form-label">Особисті документи (завантажте файли):</label>
            <input type="file" class="form-control" id="personal_docs" name="personal_docs" multiple>
        </div>

        <div class="mb-3">
            <label for="registration_address" class="form-label">Адреса реєстрації:</label>
            <textarea class="form-control" id="registration_address" name="registration_address" rows="3" required></textarea>
        </div>

        <div class="mb-3">
            <label for="deductible" class="form-label">Вибір франшизи:</label>
            <select class="form-select" id="deductible" name="deductible" required>
                <option value="" disabled selected>Оберіть франшизу</option>
                <option value="0">0 грн</option>
                <option value="1500">1500 грн</option>
                <option value="2500">2500 грн</option>
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary w-100">Відправити заявку</button>
    </form>
</div>
{% endblock %}
